<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.Music.Group.Repository.CommentRepository">
<insert id="addComment" parameterType="com.Music.Group.Domain.Comment">
    INSERT INTO
        comments_mst
    VALUES(
        0,
        #{music_id},
        #{username},
        #{comment},
        0,
        NOW(),
        NOW()
        )
</insert>
    <select id="getComments" resultType="com.Music.Group.Domain.Comment">
        SELECT
            music_id,
            username,
            comment,
            parents_id,
            update_date
        FROM
            comments_mst
        where
            music_id = #{music_id}
        ORDER BY
            if(parents_id =0, id, parents_id), id
    </select>

</mapper>